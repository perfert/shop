$(function(){var u;getUserInfo(function(n){var t,i;for(t in n){if(i=$("[data-userinfo='u_"+t+"']"),t=="Balance"){i.html((n[t]*1).toFixed(2));continue}i.html(n[t])}});var n=0,i="",r=$("#btnSubmit"),f=null,t=function(){isNaN(n)&&(n=0);f.html('选择<em class="myred">'+i+'<\/em>充值<em class="myred">'+(n*1).toFixed(2)+"<\/em>元")};$("#ulBankList > li").each(function(n){var r=$(this);n==0?f=r:(r.click(function(){r.children("i").attr("class","z-bank-Roundsel");r.siblings().children("i").attr("class","z-bank-Round");i=r.attr("data-bank");t()}),i==""&&r.click())});$("#ulOption > li").each(function(i){var r=$(this),u;if(i<5)r.click(function(){r.children("a").addClass("z-sel");r.siblings().children().removeClass("z-sel").removeClass("z-initsel");n=r.attr("data-money");t()}),n==0&&r.click();else{u=r.find("input");u.focus(function(){u.parent().addClass("z-initsel").parent().siblings().children().removeClass("z-sel");n=parseInt(u.val());t()});u.on("input",function(){var i=parseInt(r.val());n=parseInt(u.val());t()})}});u=function(){if(n<=0){$.PageDialog.fail("请选择或者输入充值金额!");return}r.addClass("grayBtn").unbind("click");var t=payBuyRecharge(i,n,"00");if(t.result)r.text("正在启动支付..");else{r.removeClass("grayBtn").on("click",u);$.PageDialog.fail(t.desc)}};r.on("click",u);t()})